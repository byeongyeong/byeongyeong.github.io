---
layout: post
title: App Delegate 메서드란?
tags:
  - TIL
  - AppDelegate
  - UIApplication
---

iOS 앱의 상태 변화에 따른 동작을 처리하는 App Delegate 메서드들이 있다.
이 메서드들과 함께 앱이 어떠한 실행과정을 거쳐서 AppDelegate를 생성하는지까지 알아보려한다.
내가 원하는 동작을 효과적으로 구현하기 위해서는 iOS와 UIKit 프레임워크가 어떻게 동작하는지 이해하는게 중요하다.

## iOS App의 실행과정
먼저 앱의 실행과정을 알아본다. 실행과정은 아래와 같다.

> 1. main 함수 실행
2. UIKit 프레임워크의 [UIApplicationMain(_ : _ : _ : _ :)](https://developer.apple.com/documentation/uikit/1622933-uiapplicationmain) 함수 실행
  - 1) [UIApplication](https://developer.apple.com/documentation/uikit/uiapplication) 싱글턴 객체 생성
  - 2) [AppDelegate](https://developer.apple.com/documentation/uikit/uiapplicationdelegate) 객체 생성 및 [UIApplication](https://developer.apple.com/documentation/uikit/uiapplication) 객체와 연결(delegate 설정)
  - 3) [UIApplication](https://developer.apple.com/documentation/uikit/uiapplication) 객체가 info.plist 파일에서 앱 실행에 필요한 데이터와 객체 로드
3. [UIApplication](https://developer.apple.com/documentation/uikit/uiapplication) 객체가 Run Loop를 생성하고 관리
4. (Info.plist에 main storyboard 세팅된 경우) main NIB 파일에서 main UI 로드
5. AppDelegate의 [application(_:willFinishLaunchingWithOptions:)](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623032-application) 호출
6. AppDelegate 및 ViewControllers의 추가 메서드를 호출하여 앱 상태 복원
7. AppDelegate의 [application(_:didFinishLaunchingWithOptions:)](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1622921-application) 호출
8. (Info.plist에 main storyboard 세팅되지 않은 경우) main UI 로드
9. 앱 이벤트 루프에서 이벤트 핸들링 시작
10. 앱 사용!

[UIApplicationMain(_ : _ : _ : _ :)](https://developer.apple.com/documentation/uikit/1622933-uiapplicationmain) 함수의 principalClassName 파라미터

[UIApplicationMain(_ : _ : _ : _ :)](https://developer.apple.com/documentation/uikit/1622933-uiapplicationmain) 함수의 delegateClassName 파라미터로 

https://programmersought.com/article/7299631766/
https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623032-application
(저장되어있는 데이터나 상태를 바탕으로 UI를 세팅. 이 단계는 inactive 상태. willFinishLaunchingWithOptions method is called after your app has been launched and its main storyboard or nib file has been loaded, but before your app’s state has been restored )

Main Event Loop(Application의 Run Loop 포함)

UIWindow와 Root ViewController 생성 및 노출

<br>
<p align="center">
   <img src="../images/2021-05-17-til-20210517/1.png" width="700" />
   <em style="font-size: 0.9em;">출처: https://oleb.net/blog/2012/02/app-launch-sequence-ios-revisited/</em>
</p>
<br>

<p align="center">
   <img src="../images/2021-05-17-til-20210517/2.png" width="600" />
   <em style="font-size: 0.9em;">출처: https://stackoverflow.com/questions/17366107/what-is-the-launch-sequence-of-an-ios-app</em>
</p>
<br>

## UIApplicationMain 함수

## UIApplication 객체

## AppDelegate 객체

## AppDelegate의 메서드
각 메소드가 call 되는 시점 및 어떤 행동을 하는지

## 결론

## 레퍼런스
- [https://oleb.net/blog/2012/02/app-launch-sequence-ios-revisited/](https://oleb.net/blog/2012/02/app-launch-sequence-ios-revisited/)
- [https://developer.apple.com/documentation/uikit/app-and-environment/responding-to-the-launch-of-your-app/about-the-app-launch_sequence](https://developer.apple.com/documentation/uikit/app_and_environment/responding_to_the_launch_of_your_app/about_the_app_launch_sequence)
- [https://medium.com/@anandin02/ios-application-launch-sequence-a13a267d1669](https://medium.com/@anandin02/ios-application-launch-sequence-a13a267d1669)
- [https://zeddios.tistory.com/1049](https://zeddios.tistory.com/1049)